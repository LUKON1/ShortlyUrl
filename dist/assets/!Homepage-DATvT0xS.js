import{u as v,r,j as e,T as M,m as x,a as T,b as I}from"./index-BXtcCD7T.js";import{N as Y,H as U}from"./h1-BvLDJpVW.js";import{u as z}from"./useAxiosPrivate-RNN22Enz.js";import{P}from"./wrapper_home-EOaEt87j.js";function B({shortUrl:s}){const{t:n}=v(),[a,c]=r.useState("");return e.jsx("button",{type:"button",className:"touch-manipulation transition-all duration-200 ease-out hover:bg-blue-500 dark:hover:bg-rose-600 active:bg-blue-600 dark:active:bg-rose-700 bg-blue-400 dark:bg-rose-500 shadow-lg hover:shadow-xl h-16 lg:h-20 w-64 text-1xl md:text-2xl lg:text-3xl p-4 rounded-lg text-white dark:text-white font-extrabold",onClick:()=>{navigator.clipboard.writeText(s).then(()=>{c(!0),setTimeout(()=>{c("")},4e3)})},children:n(a?"homepage.copied":"homepage.copy")})}function H({isLoading:s}){const{t:n}=v(),{theme:a}=r.useContext(M),c=a==="dark";return e.jsxs(x.button,{type:"submit",disabled:s,className:"motion-safe text-1xl group relative flex h-16 w-64 cursor-pointer touch-manipulation items-center justify-center overflow-hidden rounded-lg p-2 font-extrabold text-gray-900 shadow-lg hover:shadow-xl disabled:cursor-not-allowed disabled:opacity-50 md:text-2xl lg:h-20 lg:text-3xl dark:text-gray-100",initial:{opacity:0,transform:"translateY(100px)"},animate:{opacity:1,transform:"translateY(0px)",background:c?"linear-gradient(to right, #0ea5e9, #3b82f6)":"linear-gradient(to right, #0ea5e9, #2563eb)"},transition:{duration:.8,ease:"easeOut",delay:.2},whileHover:"hover",whileFocus:"hover",whileTap:{scale:.95},children:[e.jsx(x.div,{className:"absolute -top-4 right-32 z-10 h-40 w-40 rounded-full bg-blue-200 dark:bg-sky-800",style:{transition:"var(--transition-bg)"},variants:{hover:{top:4,scale:1.5,right:8}},transition:{duration:.5,ease:"easeOut"}}),e.jsx(x.div,{className:"absolute -top-4 right-2 z-10 h-32 w-32 rounded-full bg-slate-100 dark:bg-blue-900",style:{transition:"var(--transition-bg)"},variants:{hover:{top:4,scale:1.5,right:8}},transition:{duration:.5,ease:"easeOut"}}),e.jsx(x.div,{className:"absolute top-4 -right-12 z-10 h-24 w-24 rounded-full bg-blue-200 dark:bg-sky-800",style:{transition:"var(--transition-bg)"},variants:{hover:{top:4,right:8,scale:1.5}},transition:{duration:.5,ease:"easeOut"}}),e.jsx(x.div,{className:"absolute -top-4 right-20 z-10 h-16 w-16 rounded-full bg-sky-400 dark:bg-sky-600",style:{transition:"var(--transition-bg)"},variants:{hover:{top:4,right:8,scale:1.5}},transition:{duration:.5,ease:"easeOut"}}),e.jsx("p",{className:"relative z-10",children:n(s?"homepage.cutting":"homepage.cut")})]})}function Q({qrCodeDataUrl:s,qrContainerRef:n}){return s?e.jsx("div",{ref:n,className:"relative flex flex-col items-center",children:e.jsx("img",{src:s,alt:"QR",className:"user-select-all h-64 w-64 object-contain border-5 rounded-4xl border-rose-300 dark:border-[#00a6f4]"})}):null}function _({qrCodeDataUrl:s,url:n}){const{t:a}=v(),c=()=>{if(!s)return;const h=new URL(n).hostname.split(".").slice(-2).join("."),i=document.createElement("a");i.href=s,i.download=`${h}-QRcode.png`,document.body.appendChild(i),i.click(),document.body.removeChild(i)};return e.jsx("div",{children:e.jsx("button",{onClick:c,type:"button",className:"touch-manipulation transition-all duration-200 ease-out hover:bg-blue-500 dark:hover:bg-rose-600 active:bg-blue-600 dark:active:bg-rose-700 bg-blue-400 dark:bg-rose-500 shadow-lg hover:shadow-xl h-16 lg:h-20 w-64 text-1xl md:text-2xl lg:text-3xl p-4 rounded-lg text-white dark:text-white font-extrabold",children:a("homepage.downloadqr")})})}const V=s=>{const n=window.location.host,c=[window.location.hostname,n];return new RegExp(`^(https?://)?(www.)?(${c.join("|")})(/|$)`,"i").test(s)};function G({value:s,onChange:n,options:a,className:c}){const{t:l}=v(),[p,d]=r.useState(!1),[h,i]=r.useState(!1),w=r.useRef(null),j=31536e3,[y,N]=r.useState("1"),[C,u]=r.useState(86400),k=[{label:l("homepage.urlopt.urtime.minutes"),value:60},{label:l("homepage.urlopt.urtime.hour"),value:3600},{label:l("homepage.urlopt.urtime.day"),value:86400},{label:l("homepage.urlopt.urtime.week"),value:604800},{label:l("homepage.urlopt.urtime.month"),value:2592e3},{label:l("homepage.urlopt.urtime.year"),value:31536e3}],f=a.find(t=>t.value===s),g=f?f.label:(()=>{if(h)return`${y||1} ${k.find(o=>o.value===C)?.label||""}`;const t=[...k].sort((o,b)=>b.value-o.value);for(const o of t)if(s>=o.value&&s%o.value===0)return`${Math.round(s/o.value)} ${o.label}`;return l("homepage.urlopt.urtime.custom")})(),O=t=>{n(t),i(!1),d(!1)},S=()=>{let o=(parseInt(y)||1)*C;o>j&&(o=j,N("1"),u(j)),o<60&&(o=60),n(o),d(!1)},L=t=>{t.key==="Enter"?(t.preventDefault(),S()):t.key==="Escape"&&(d(!1),i(!1))};return r.useEffect(()=>{function t(o){w.current&&!w.current.contains(o.target)&&(d(!1),i(!1))}return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),e.jsxs("div",{className:"relative z-50",ref:w,children:[e.jsxs("button",{type:"button",onClick:()=>d(!p),className:`flex touch-manipulation items-center gap-2 rounded-lg border-2 border-sky-400 bg-white px-3 py-1.5 text-center text-sm font-medium text-gray-700 shadow-sm transition-all hover:bg-gray-50 focus:outline-none dark:border-sky-500 dark:bg-slate-800 dark:text-gray-200 dark:hover:bg-slate-700 ${c||""}`,children:[e.jsx("span",{className:"max-w-[120px] truncate",children:g}),e.jsx("svg",{className:`h-4 w-4 text-sky-500 transition-transform duration-200 ${p?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p&&e.jsx("div",{className:"ring-opacity-5 absolute top-full right-0 mt-2 w-64 origin-top-right overflow-hidden rounded-xl border border-gray-100 bg-white shadow-xl ring-1 ring-black focus:outline-none dark:border-slate-700 dark:bg-slate-800",children:e.jsx("div",{className:"p-1",children:h?e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase dark:text-gray-400",children:l("homepage.urlopt.urtime.custom")}),e.jsx("button",{onClick:()=>i(!1),className:"text-xs text-sky-500 hover:text-sky-600 dark:text-sky-400",children:"Back"})]}),e.jsxs("div",{className:"mb-3 flex gap-2",children:[e.jsx("input",{autoFocus:!0,type:"number",min:"1",max:"999",value:y,onChange:t=>N(t.target.value),onKeyDown:L,className:"w-20 rounded-md border border-gray-300 bg-white px-2 py-1 text-sm text-gray-900 focus:border-sky-500 focus:ring-1 focus:ring-sky-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"}),e.jsx("select",{value:C,onChange:t=>u(parseInt(t.target.value)),className:"flex-1 rounded-md border border-gray-300 bg-white px-2 py-1 text-sm text-gray-900 focus:border-sky-500 focus:ring-1 focus:ring-sky-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:k.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsx("button",{type:"button",onClick:S,className:"w-full rounded-md bg-sky-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-sky-600 focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 focus:outline-none dark:hover:bg-sky-400",children:l("homepage.urlopt.urtime.confirm")})]}):e.jsxs(e.Fragment,{children:[a.map(t=>e.jsx("button",{type:"button",onClick:()=>O(t.value),className:`flex w-full items-center rounded-lg px-4 py-2 text-sm ${s===t.value?"bg-sky-50 text-sky-700 dark:bg-slate-700 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-200 dark:hover:bg-slate-700"}`,children:t.label},t.value)),e.jsx("div",{className:"my-1 h-px bg-gray-100 dark:bg-slate-700"}),e.jsxs("button",{type:"button",onClick:()=>i(!0),className:"flex w-full items-center rounded-lg px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 dark:text-gray-200 dark:hover:bg-slate-700",children:[l("homepage.urlopt.urtime.custom"),"..."]})]})})})]})}const $="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cpath%20id='cross-a'%20d='M0.292893219,1.70710678%20C-0.0976310729,1.31658249%20-0.0976310729,0.683417511%200.292893219,0.292893219%20C0.683417511,-0.0976310729%201.31658249,-0.0976310729%201.70710678,0.292893219%20L9.70710678,8.29289322%20C10.0976311,8.68341751%2010.0976311,9.31658249%209.70710678,9.70710678%20C9.31658249,10.0976311%208.68341751,10.0976311%208.29289322,9.70710678%20L0.292893219,1.70710678%20Z'/%3e%3cpath%20id='cross-c'%20d='M3.58578644,5%20L0.292893219,1.70710678%20C-0.0976310729,1.31658249%20-0.0976310729,0.683417511%200.292893219,0.292893219%20C0.683417511,-0.0976310729%201.31658249,-0.0976310729%201.70710678,0.292893219%20L5,3.58578644%20L8.29289322,0.292893219%20C8.68341751,-0.0976310729%209.31658249,-0.0976310729%209.70710678,0.292893219%20C10.0976311,0.683417511%2010.0976311,1.31658249%209.70710678,1.70710678%20L6.41421356,5%20L9.70710678,8.29289322%20C10.0976311,8.68341751%2010.0976311,9.31658249%209.70710678,9.70710678%20C9.31658249,10.0976311%208.68341751,10.0976311%208.29289322,9.70710678%20L5,6.41421356%20L1.70710678,9.70710678%20C1.31658249,10.0976311%200.683417511,10.0976311%200.292893219,9.70710678%20C-0.0976310729,9.31658249%20-0.0976310729,8.68341751%200.292893219,8.29289322%20L3.58578644,5%20Z'/%3e%3c/defs%3e%3cg%20fill='none'%20fill-rule='evenodd'%3e%3cg%20transform='translate(8%206)'%3e%3cmask%20id='cross-b'%20fill='%23ffffff'%3e%3cuse%20xlink:href='%23cross-a'/%3e%3c/mask%3e%3cuse%20fill='%23D8D8D8'%20fill-rule='nonzero'%20xlink:href='%23cross-a'/%3e%3cg%20fill='%23FFA0A0'%20mask='url(%23cross-b)'%3e%3crect%20width='24'%20height='24'%20transform='translate(-8%20-6)'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='rotate(-90%2012%205)'%3e%3cmask%20id='cross-d'%20fill='%23ffffff'%3e%3cuse%20xlink:href='%23cross-c'/%3e%3c/mask%3e%3cuse%20fill='%23000000'%20fill-rule='nonzero'%20xlink:href='%23cross-c'/%3e%3cg%20fill='%237600FF'%20mask='url(%23cross-d)'%3e%3crect%20width='24'%20height='24'%20transform='translate(-7%20-7)'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function J(){const s="/cut/shorter",n="https://shortlyurl.ru",{t:a}=v(),{auth:c}=T(),l=c?.userId,p=z(),[d,h]=r.useState(""),[i,w]=r.useState(""),[j,y]=r.useState(!1),[N,C]=r.useState(""),[u,k]=r.useState(""),[f,D]=r.useState(!1),g=r.useRef(),O=r.useRef(),S=[{value:2592e3,label:a("homepage.urlopt.urtime.month")},{value:604800,label:a("homepage.urlopt.urtime.week")},{value:86400,label:a("homepage.urlopt.urtime.day")},{value:3600,label:a("homepage.urlopt.urtime.hour")}],[L,t]=r.useState(S[0].value);r.useEffect(()=>{O.current.focus()},[]);const o=r.useCallback(async b=>{if(b.preventDefault(),!d){g.current?.addNotification(a("message.urlblank"),3e3);return}try{if(V(d))throw new Error;y(!0);const A=await(l?p:I).post(s,JSON.stringify({url:d,urlTime:L,customAlias:u||void 0}),{headers:{"Content-Type":"application/json"}}),R=A?.data?.shortCode;if(!l){const E=JSON.parse(localStorage.getItem("anonymousLinks")||"[]");E.includes(R)||(E.push(R),localStorage.setItem("anonymousLinks",JSON.stringify(E)))}const F=`${n}/${R}`;w(F),C(A?.data?.qrCodeDataUrl)}catch(m){m?.response?m.response?.status===429?g.current?.addNotification(m.response.data.error||a("message.ratelimit"),5e3):m.response?.status===400?g.current?.addNotification(m.response.data.error||a("message.invalidurl"),3e3):m.response?.status===409?g.current?.addNotification(m.response.data.error||a("message.conflicterror"),3e3):g.current?.addNotification(a("message.urlcuterror"),3e3):g.current?.addNotification(a("message.servererror"),3e3)}finally{y(!1)}},[L,d,l,p,I,u]);return e.jsxs(e.Fragment,{children:[e.jsx(Y,{ref:g}),e.jsxs("form",{onSubmit:o,className:"flex flex-col gap-6 transition-all duration-200 ease-out md:gap-0 lg:gap-1.5",children:[e.jsxs("div",{className:"mb-6 flex flex-col items-center gap-6 md:mb-18 md:flex-row md:gap-6",children:[e.jsxs("div",{className:"relative flex flex-col items-center",children:[d&&e.jsx("button",{className:"absolute top-1 left-1 z-10 flex cursor-pointer touch-manipulation items-center justify-center rounded-full p-0.5 md:top-2",onClick:()=>h(""),type:"button",children:e.jsx("img",{className:"h-6 w-6 opacity-40 transition-opacity hover:opacity-100 dark:invert",src:$,alt:"X"})}),e.jsx(x.input,{ref:O,className:"text-1xl h-16 w-3xs max-w-5xl rounded-lg border-2 border-sky-400 bg-white p-2 text-center text-gray-900 shadow-md transition-none! focus:ring-2 focus:ring-sky-500 focus:outline-none md:w-[55vw] md:text-2xl lg:h-20 lg:w-[70vw] lg:text-3xl dark:border-sky-500 dark:bg-slate-800 dark:text-gray-100 dark:focus:ring-sky-400",initial:{opacity:0,transform:"translateY(100px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.8,ease:"easeOut",delay:.1},type:"url",value:d,onChange:b=>{const m=b?.target.value;h(m)},placeholder:a("homepage.placeholder")}),e.jsxs(x.div,{className:"motion-safe mt-6 flex w-3xs flex-col items-center justify-center gap-4 rounded-lg border border-sky-100 bg-white/95 px-4 py-2 shadow-sm backdrop-blur-sm md:absolute md:top-full md:left-0 md:mt-2.5 md:w-full md:min-w-130 md:flex-row md:justify-center md:gap-8 dark:border-slate-700 dark:bg-slate-800/95",style:{zIndex:100},initial:{opacity:0,transform:"translateY(100px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.6,ease:"easeOut",delay:.3},children:[e.jsxs("div",{className:"flex w-full items-center justify-center gap-3 md:w-auto",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 md:text-base dark:text-gray-300",children:a("homepage.urlopt.urtime.liftimeword")}),e.jsx(G,{value:L,onChange:t,options:S,className:"min-w-35"})]}),e.jsx("div",{className:"hidden h-4 w-px bg-sky-200 md:block dark:bg-slate-600"}),e.jsxs("div",{className:"relative flex w-full items-center md:w-auto",children:[f&&e.jsx("button",{type:"button",onClick:()=>{D(!1),k("")},className:"absolute -left-5.5 flex cursor-pointer items-center justify-center rounded-full p-0.5 text-gray-400 transition-colors hover:text-gray-600 md:-left-7 dark:text-gray-500 dark:hover:text-gray-300",children:e.jsx("img",{className:"h-6 w-6 opacity-40 hover:opacity-100 dark:invert",src:$,alt:"Close"})}),e.jsxs("div",{className:`flex flex-1 items-center overflow-hidden rounded-md border bg-sky-50/50 md:min-w-48 ${f?"border-sky-300 dark:border-sky-700":"cursor-pointer border-sky-200 hover:border-sky-300 dark:border-slate-600 dark:hover:border-sky-700"} dark:bg-slate-900/60`,onClick:()=>!f&&D(!0),children:[e.jsxs("span",{className:"shrink-0 border-r border-sky-200 bg-sky-100/80 px-2 py-1.5 text-xs font-medium text-sky-700 select-none dark:border-sky-800 dark:bg-sky-900/40 dark:text-sky-300",children:[window.location.host,"/"]}),f?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",autoFocus:!0,value:u,onChange:b=>k(b.target.value.replace(/[^a-zA-Z0-9-_]/g,"")),placeholder:a("homepage.urlopt.aliasPlaceholder"),className:"w-full min-w-0 flex-1 bg-transparent px-2 py-1.5 text-sm text-gray-900 placeholder-gray-400 focus:outline-none dark:text-gray-100 dark:placeholder-gray-500",maxLength:30}),e.jsxs("span",{className:`mr-2 shrink-0 text-xs opacity-60 select-none ${u.length>0&&u.length<4?"text-amber-500 dark:text-amber-400":"text-gray-400 dark:text-gray-500"}`,children:[u.length,"/30"]})]}):e.jsx("span",{className:"px-2 py-1.5 text-sm text-gray-400 italic select-none dark:text-gray-500",children:a("homepage.urlopt.aliasPlaceholder")})]})]})]})]}),e.jsx(H,{isLoading:j})]}),i&&e.jsxs("div",{className:"mb-30 flex flex-col items-center",children:[e.jsxs("div",{className:"mb-30 flex flex-col items-center justify-center gap-5 md:flex-row md:gap-6",children:[e.jsx(x.div,{className:"text-1xl box-border flex h-16 w-3xs max-w-5xl flex-col items-center justify-center overflow-hidden rounded-lg border-2 border-green-500 bg-green-50 p-2 text-center font-semibold text-green-700 shadow-lg transition-none! md:w-[55vw] md:text-2xl lg:h-20 lg:w-[70vw] lg:text-3xl dark:border-green-400 dark:bg-slate-800 dark:text-green-300",initial:{opacity:0,transform:"translateY(100px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.8,ease:"easeOut",delay:.2},children:e.jsx("span",{className:"select-all",children:i})}),e.jsx(x.div,{className:"motion-safe",initial:{opacity:0,transform:"translateY(100px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.8,ease:"easeOut",delay:.3},children:e.jsx(B,{shortUrl:i})})]}),e.jsxs(x.div,{className:"motion-safe flex flex-col gap-5 md:flex-col-reverse md:gap-8",initial:{opacity:0,transform:"translateY(100px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.8,ease:"easeOut",delay:.4},children:[e.jsx(Q,{qrCodeDataUrl:N}),e.jsx(_,{qrCodeDataUrl:N,url:d})]})]})]})]})}function X(){const{t:s}=v();return e.jsxs(P,{children:[e.jsx(U,{children:s("homepage.title")}),e.jsx(J,{})]})}export{X as default};
